services:
  owner-portal:
    build:
      context: ..
      dockerfile: apps/portal/Dockerfile
      args:
        VITE_OWNER_API_BASE_URL: ${VITE_OWNER_API_BASE_URL:-https://api.localhost}
    image: owner-portal:latest
    container_name: owner-portal
    restart: unless-stopped
    networks:
      - workspace-network
    labels:
      traefik.enable: "true"
      traefik.http.routers.owner-portal.rule: Host(`portal.localhost`)
      traefik.http.routers.owner-portal.entrypoints: websecure
      traefik.http.routers.owner-portal.tls: "true"
      traefik.http.services.owner-portal.loadbalancer.server.port: "80"

networks:
  workspace-network:
    external: true
