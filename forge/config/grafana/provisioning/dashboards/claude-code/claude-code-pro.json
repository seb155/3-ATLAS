{
  "annotations": { "list": [] },
  "description": "Claude Code PRO Dashboard - Advanced Usage Analytics & Optimization Insights",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "panels": [
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
      "id": 200,
      "panels": [],
      "title": "Token Flow Analysis (Sent vs Received vs Cached)",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#3B82F6", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 0, "y": 1 },
      "id": 201,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_tokens_sent_total)", "legendFormat": "Sent", "refId": "A" }],
      "title": "Tokens SENT (Input)",
      "description": "Tokens sent TO Claude (your context/prompts)",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 4, "y": 1 },
      "id": 202,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_tokens_received_total)", "legendFormat": "Received", "refId": "A" }],
      "title": "Tokens RECEIVED (Output)",
      "description": "Tokens received FROM Claude (its responses)",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#F59E0B", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 8, "y": 1 },
      "id": 203,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_tokens_cached_total)", "legendFormat": "Cached", "refId": "A" }],
      "title": "Tokens from CACHE",
      "description": "Tokens served from cache (FREE savings!)",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "max": 1, "min": 0,
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#EF4444", "value": null }, { "color": "#EAB308", "value": 0.3 }, { "color": "#22C55E", "value": 0.5 }] },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 12, "y": 1 },
      "id": 204,
      "options": { "orientation": "auto", "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false }, "showThresholdLabels": true, "showThresholdMarkers": true },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "avg(claude_code_cache_hit_rate)", "legendFormat": "Hit Rate", "refId": "A" }],
      "title": "Cache Hit Rate",
      "description": "How often cache is used (higher = better)",
      "type": "gauge"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }] },
          "unit": "currencyUSD"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 16, "y": 1 },
      "id": 205,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_cost_saved_cache_usd)", "legendFormat": "Saved", "refId": "A" }],
      "title": "Money SAVED (Cache)",
      "description": "Actual money saved via prompt caching",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 3 }, { "color": "#EF4444", "value": 5 }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 4, "w": 4, "x": 20, "y": 1 },
      "id": 206,
      "options": { "colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_optimization_insights_total{severity=\"high\"})", "legendFormat": "High", "refId": "A" }],
      "title": "Optimization Alerts",
      "description": "High-priority optimization opportunities",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 30, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": [
          { "matcher": { "id": "byRegexp", "options": ".*sent.*|.*input.*" }, "properties": [{ "id": "color", "value": { "fixedColor": "#3B82F6", "mode": "fixed" } }] },
          { "matcher": { "id": "byRegexp", "options": ".*received.*|.*output.*" }, "properties": [{ "id": "color", "value": { "fixedColor": "#22C55E", "mode": "fixed" } }] },
          { "matcher": { "id": "byRegexp", "options": ".*cache.*" }, "properties": [{ "id": "color", "value": { "fixedColor": "#F59E0B", "mode": "fixed" } }] }
        ]
      },
      "gridPos": { "h": 8, "w": 16, "x": 0, "y": 5 },
      "id": 210,
      "options": { "legend": { "calcs": ["sum", "mean"], "displayMode": "table", "placement": "right", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "desc" } },
      "targets": [
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(increase(claude_code_tokens_sent_total[$__interval]))", "legendFormat": "Sent (Input)", "refId": "A" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(increase(claude_code_tokens_received_total[$__interval]))", "legendFormat": "Received (Output)", "refId": "B" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(increase(claude_code_tokens_cached_total[$__interval]))", "legendFormat": "From Cache", "refId": "C" }
      ],
      "title": "Token Flow Over Time",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
          "mappings": [],
          "unit": "short"
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "Sent (Input)" }, "properties": [{ "id": "color", "value": { "fixedColor": "#3B82F6", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "Received (Output)" }, "properties": [{ "id": "color", "value": { "fixedColor": "#22C55E", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "From Cache" }, "properties": [{ "id": "color", "value": { "fixedColor": "#F59E0B", "mode": "fixed" } }] }
        ]
      },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 5 },
      "id": 211,
      "options": { "displayLabels": ["name", "percent"], "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] }, "pieType": "donut", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "tooltip": { "mode": "single", "sort": "none" } },
      "targets": [
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_tokens_sent_total)", "legendFormat": "Sent (Input)", "refId": "A" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_tokens_received_total)", "legendFormat": "Received (Output)", "refId": "B" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_tokens_cached_total)", "legendFormat": "From Cache", "refId": "C" }
      ],
      "title": "Token Distribution",
      "type": "piechart"
    },
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 13 },
      "id": 300,
      "panels": [],
      "title": "ATLAS Commands & Workflows",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "align": "auto", "cellOptions": { "type": "color-background" }, "inspect": false },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#3B82F6", "value": 10 }, { "color": "#7C3AED", "value": 50 }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "Count" }, "properties": [{ "id": "custom.cellOptions", "value": { "mode": "gradient", "type": "gauge" } }, { "id": "min", "value": 0 }] }
        ]
      },
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 14 },
      "id": 301,
      "options": { "cellHeight": "sm", "footer": { "countRows": false, "enablePagination": false, "fields": "", "reducer": ["sum"], "show": true }, "showHeader": true, "sortBy": [{ "desc": true, "displayName": "Count" }] },
      "targets": [
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "claude_code_atlas_commands_total", "format": "table", "instant": true, "refId": "A" }
      ],
      "title": "ATLAS Commands (Most Used)",
      "transformations": [
        { "id": "organize", "options": { "excludeByName": { "Time": true, "__name__": true, "instance": true, "job": true }, "indexByName": {}, "renameByName": { "Value": "Count", "command": "Command" } } }
      ],
      "type": "table"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
          "mappings": [],
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 14 },
      "id": 302,
      "options": { "displayLabels": ["name", "value"], "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] }, "pieType": "pie", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "tooltip": { "mode": "single", "sort": "none" } },
      "targets": [
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (workflow) (claude_code_workflows_total)", "legendFormat": "{{workflow}}", "refId": "A" }
      ],
      "title": "Detected Workflows",
      "type": "piechart"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 80, "gradientMode": "hue", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false, "stacking": { "group": "A", "mode": "normal" }, "thresholdsStyle": { "mode": "off" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 14 },
      "id": 303,
      "options": { "legend": { "calcs": ["sum"], "displayMode": "table", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "desc" } },
      "targets": [
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "topk(10, sum by (tool) (claude_code_tools_total))", "legendFormat": "{{tool}}", "refId": "A" }
      ],
      "title": "Top 10 Tools Used",
      "type": "barchart"
    },
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 22 },
      "id": 400,
      "panels": [],
      "title": "Cost Analysis & Budget (Max Plan $300/mo)",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "max": 300, "min": 0,
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 200 }, { "color": "#EF4444", "value": 280 }] },
          "unit": "currencyUSD"
        },
        "overrides": []
      },
      "gridPos": { "h": 6, "w": 6, "x": 0, "y": 23 },
      "id": 401,
      "options": { "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "showThresholdLabels": true, "showThresholdMarkers": true },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "claude_code_budget_used_usd", "legendFormat": "Used", "refId": "A" }],
      "title": "Monthly Budget",
      "type": "gauge"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 10 }, { "color": "#EF4444", "value": 30 }] },
          "unit": "currencyUSD"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 3, "x": 6, "y": 23 },
      "id": 402,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(increase(claude_code_cost_usd[24h]))", "legendFormat": "Today", "refId": "A" }],
      "title": "Today",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 50 }, { "color": "#EF4444", "value": 100 }] },
          "unit": "currencyUSD"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 3, "x": 9, "y": 23 },
      "id": 403,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(increase(claude_code_cost_usd[7d]))", "legendFormat": "Week", "refId": "A" }],
      "title": "This Week",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#EF4444", "value": null }, { "color": "#EAB308", "value": 50 }, { "color": "#22C55E", "value": 100 }] },
          "unit": "currencyUSD"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 3, "x": 6, "y": 26 },
      "id": 404,
      "options": { "colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "claude_code_budget_remaining_usd", "legendFormat": "Remaining", "refId": "A" }],
      "title": "Remaining",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 30 }, { "color": "#EF4444", "value": 50 }] },
          "unit": "currencyUSD"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 3, "x": 9, "y": 26 },
      "id": 405,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["last"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(rate(claude_code_cost_usd[1h])) * 24", "legendFormat": "Rate", "refId": "A" }],
      "title": "Burn Rate/day",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "bars", "fillOpacity": 80, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "never", "spanNulls": false, "stacking": { "group": "A", "mode": "normal" }, "thresholdsStyle": { "mode": "line+area" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "transparent", "value": null }, { "color": "rgba(234, 179, 8, 0.2)", "value": 10 }, { "color": "rgba(239, 68, 68, 0.2)", "value": 30 }] },
          "unit": "currencyUSD"
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "opus" }, "properties": [{ "id": "color", "value": { "fixedColor": "#7C3AED", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "sonnet" }, "properties": [{ "id": "color", "value": { "fixedColor": "#2563EB", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "haiku" }, "properties": [{ "id": "color", "value": { "fixedColor": "#10B981", "mode": "fixed" } }] }
        ]
      },
      "gridPos": { "h": 6, "w": 12, "x": 12, "y": 23 },
      "id": 406,
      "options": { "legend": { "calcs": ["sum"], "displayMode": "table", "placement": "right", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "desc" } },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (model) (increase(claude_code_cost_usd[1d]))", "interval": "1d", "legendFormat": "{{model}}", "refId": "A" }],
      "title": "Daily Cost by Model",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 29 },
      "id": 500,
      "panels": [],
      "title": "Usage Patterns & Optimization",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "continuous-BlPu" },
          "custom": { "axisCenteredZero": false, "axisColorMode": "text", "axisPlacement": "auto", "axisSoftMin": 0, "scaleDistribution": { "type": "linear" } },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 6, "w": 12, "x": 0, "y": 30 },
      "id": 501,
      "options": { "calculate": false, "cellGap": 2, "cellValues": { "unit": "short" }, "color": { "exponent": 0.5, "fill": "#F2495C", "min": 0, "mode": "scheme", "reverse": false, "scale": "exponential", "scheme": "Oranges", "steps": 64 }, "exemplars": { "color": "rgba(255,0,255,0.7)" }, "filterValues": { "le": 1e-9 }, "legend": { "show": true }, "rowsFrame": { "layout": "auto", "value": "Hour" }, "showValue": "auto", "tooltip": { "show": true, "yHistogram": false }, "yAxis": { "axisPlacement": "left", "reverse": false, "unit": "short" } },
      "targets": [
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (hour) (claude_code_hourly_tokens{type=\"input\"})", "format": "heatmap", "legendFormat": "{{hour}}", "refId": "A" }
      ],
      "title": "Usage by Hour of Day",
      "description": "When you use Claude Code most",
      "type": "heatmap"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "hideFrom": { "legend": false, "tooltip": false, "viz": false } },
          "mappings": [],
          "unit": "short"
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "opus" }, "properties": [{ "id": "color", "value": { "fixedColor": "#7C3AED", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "sonnet" }, "properties": [{ "id": "color", "value": { "fixedColor": "#2563EB", "mode": "fixed" } }] },
          { "matcher": { "id": "byName", "options": "haiku" }, "properties": [{ "id": "color", "value": { "fixedColor": "#10B981", "mode": "fixed" } }] }
        ]
      },
      "gridPos": { "h": 6, "w": 6, "x": 12, "y": 30 },
      "id": 502,
      "options": { "displayLabels": ["name", "percent"], "legend": { "displayMode": "table", "placement": "right", "showLegend": true, "values": ["value", "percent"] }, "pieType": "donut", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "tooltip": { "mode": "single", "sort": "none" } },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (model) (claude_code_cost_usd)", "legendFormat": "{{model}}", "refId": "A" }],
      "title": "Cost by Model",
      "type": "piechart"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 500 }, { "color": "#EF4444", "value": 1000 }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 6, "x": 18, "y": 30 },
      "id": 503,
      "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["mean"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "avg(claude_code_avg_output_tokens)", "legendFormat": "Avg", "refId": "A" }],
      "title": "Avg Output Tokens/Response",
      "description": "Average response length from Claude",
      "type": "stat"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 5 }, { "color": "#EF4444", "value": 10 }] },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": { "h": 3, "w": 6, "x": 18, "y": 33 },
      "id": 504,
      "options": { "colorMode": "value", "graphMode": "none", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": ["sum"], "fields": "", "values": false }, "textMode": "auto" },
      "targets": [{ "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum(claude_code_model_switches_total)", "legendFormat": "Switches", "refId": "A" }],
      "title": "Model Switches",
      "description": "Sessions where model changed mid-session",
      "type": "stat"
    },
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 36 },
      "id": 600,
      "panels": [],
      "title": "Projects & Sessions",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "prometheus" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "thresholds" },
          "custom": { "align": "auto", "cellOptions": { "type": "auto" }, "inspect": false },
          "mappings": [],
          "thresholds": { "mode": "absolute", "steps": [{ "color": "green", "value": null }] }
        },
        "overrides": [
          { "matcher": { "id": "byName", "options": "Cost ($)" }, "properties": [{ "id": "unit", "value": "currencyUSD" }, { "id": "custom.cellOptions", "value": { "type": "color-background" } }, { "id": "thresholds", "value": { "mode": "absolute", "steps": [{ "color": "#22C55E", "value": null }, { "color": "#EAB308", "value": 5 }, { "color": "#EF4444", "value": 20 }] } }] },
          { "matcher": { "id": "byName", "options": "Sent" }, "properties": [{ "id": "unit", "value": "short" }] },
          { "matcher": { "id": "byName", "options": "Received" }, "properties": [{ "id": "unit", "value": "short" }] },
          { "matcher": { "id": "byName", "options": "Cached" }, "properties": [{ "id": "unit", "value": "short" }] },
          { "matcher": { "id": "byName", "options": "Saved ($)" }, "properties": [{ "id": "unit", "value": "currencyUSD" }, { "id": "custom.cellOptions", "value": { "type": "color-text" } }, { "id": "thresholds", "value": { "mode": "absolute", "steps": [{ "color": "#6B7280", "value": null }, { "color": "#22C55E", "value": 0.1 }] } }] },
          { "matcher": { "id": "byName", "options": "Sessions" }, "properties": [{ "id": "unit", "value": "short" }] }
        ]
      },
      "gridPos": { "h": 8, "w": 24, "x": 0, "y": 37 },
      "id": 601,
      "options": { "cellHeight": "sm", "footer": { "countRows": false, "enablePagination": false, "fields": ["Cost ($)", "Sent", "Received", "Cached", "Saved ($)", "Sessions"], "reducer": ["sum"], "show": true }, "showHeader": true, "sortBy": [{ "desc": true, "displayName": "Cost ($)" }] },
      "targets": [
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (project) (claude_code_cost_monthly_usd)", "format": "table", "instant": true, "refId": "A" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (project) (claude_code_tokens_sent_total)", "format": "table", "instant": true, "refId": "B" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (project) (claude_code_tokens_received_total)", "format": "table", "instant": true, "refId": "C" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (project) (claude_code_tokens_cached_total)", "format": "table", "instant": true, "refId": "D" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (project) (claude_code_cost_saved_cache_usd)", "format": "table", "instant": true, "refId": "E" },
        { "datasource": { "type": "prometheus", "uid": "prometheus" }, "expr": "sum by (project) (claude_code_sessions_total)", "format": "table", "instant": true, "refId": "F" }
      ],
      "title": "Usage by Project (Detailed)",
      "transformations": [
        { "id": "merge", "options": {} },
        { "id": "organize", "options": { "excludeByName": { "Time": true }, "indexByName": {}, "renameByName": { "Value #A": "Cost ($)", "Value #B": "Sent", "Value #C": "Received", "Value #D": "Cached", "Value #E": "Saved ($)", "Value #F": "Sessions", "project": "Project" } } }
      ],
      "type": "table"
    }
  ],
  "refresh": "1m",
  "schemaVersion": 39,
  "tags": ["claude-code", "observability", "cost", "ai", "atlas", "optimization"],
  "templating": { "list": [] },
  "time": { "from": "now-7d", "to": "now" },
  "timepicker": { "refresh_intervals": ["10s", "30s", "1m", "5m", "15m", "30m", "1h"], "time_options": ["5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d"] },
  "timezone": "browser",
  "title": "Claude Code PRO",
  "uid": "claude-code-pro",
  "version": 1,
  "weekStart": ""
}
