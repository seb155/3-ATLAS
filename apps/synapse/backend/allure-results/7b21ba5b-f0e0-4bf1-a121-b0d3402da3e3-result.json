{"name": "test_export_csv", "status": "broken", "statusDetails": {"message": "sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"assets\" violates foreign key constraint \"assets_project_id_fkey\"\nDETAIL:  Key (project_id)=(test-project-export) is not present in table \"projects\".\n\n[SQL: INSERT INTO assets (id, tag, description, type, project_id, area, system, io_type, electrical, process, manufacturer_part_id, data_status, confidence_score, data_source_id, discipline, semantic_type, lod, isa95_level, location_id, package_id) VALUES (%(id)s, %(tag)s, %(description)s, %(type)s, %(project_id)s, %(area)s, %(system)s, %(io_type)s, %(electrical)s::JSON, %(process)s::JSON, %(manufacturer_part_id)s, %(data_status)s, %(confidence_score)s, %(data_source_id)s, %(discipline)s, %(semantic_type)s, %(lod)s, %(isa95_level)s, %(location_id)s, %(package_id)s)]\n[parameters: {'id': 'dc1838af-16fa-4808-9a88-a6f6be97fd54', 'tag': 'EXPORT-TEST-01', 'description': 'Test Asset for Export', 'type': <AssetType.MOTOR: 'MOTOR'>, 'project_id': 'test-project-export', 'area': None, 'system': None, 'io_type': None, 'electrical': '{\"voltage\": \"480V\", \"powerKW\": 55}', 'process': '{\"fluid\": \"Water\"}', 'manufacturer_part_id': None, 'data_status': 'FRESH_IMPORT', 'confidence_score': 1.0, 'data_source_id': None, 'discipline': None, 'semantic_type': None, 'lod': None, 'isa95_level': None, 'location_id': None, 'package_id': None}]\n(Background on this error at: https://sqlalche.me/e/20/gkpj)", "trace": "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py:951: in do_execute\n    cursor.execute(statement, parameters)\nE   psycopg2.errors.ForeignKeyViolation: insert or update on table \"assets\" violates foreign key constraint \"assets_project_id_fkey\"\nE   DETAIL:  Key (project_id)=(test-project-export) is not present in table \"projects\".\n\nThe above exception was the direct cause of the following exception:\ntests/test_export.py:21: in test_export_csv\n    db.commit()\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py:2030: in commit\n    trans.commit(_to_root=True)\n<string>:2: in commit\n    ???\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py:137: in _go\n    ret_value = fn(self, *arg, **kw)\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py:1311: in commit\n    self._prepare_impl()\n<string>:2: in _prepare_impl\n    ???\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py:137: in _go\n    ret_value = fn(self, *arg, **kw)\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py:1286: in _prepare_impl\n    self.session.flush()\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py:4331: in flush\n    self._flush(objects)\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py:4466: in _flush\n    with util.safe_reraise():\n/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py:224: in __exit__\n    raise exc_value.with_traceback(exc_tb)\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py:4427: in _flush\n    flush_context.execute()\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py:466: in execute\n    rec.execute(self)\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py:642: in execute\n    util.preloaded.orm_persistence.save_obj(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py:93: in save_obj\n    _emit_insert_statements(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py:1233: in _emit_insert_statements\n    result = connection.execute(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1419: in execute\n    return meth(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py:526: in _execute_on_connection\n    return connection._execute_clauseelement(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1641: in _execute_clauseelement\n    ret = self._execute_context(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1846: in _execute_context\n    return self._exec_single_context(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1986: in _exec_single_context\n    self._handle_dbapi_exception(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py:2355: in _handle_dbapi_exception\n    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py:1967: in _exec_single_context\n    self.dialect.do_execute(\n/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py:951: in do_execute\n    cursor.execute(statement, parameters)\nE   sqlalchemy.exc.IntegrityError: (psycopg2.errors.ForeignKeyViolation) insert or update on table \"assets\" violates foreign key constraint \"assets_project_id_fkey\"\nE   DETAIL:  Key (project_id)=(test-project-export) is not present in table \"projects\".\nE   \nE   [SQL: INSERT INTO assets (id, tag, description, type, project_id, area, system, io_type, electrical, process, manufacturer_part_id, data_status, confidence_score, data_source_id, discipline, semantic_type, lod, isa95_level, location_id, package_id) VALUES (%(id)s, %(tag)s, %(description)s, %(type)s, %(project_id)s, %(area)s, %(system)s, %(io_type)s, %(electrical)s::JSON, %(process)s::JSON, %(manufacturer_part_id)s, %(data_status)s, %(confidence_score)s, %(data_source_id)s, %(discipline)s, %(semantic_type)s, %(lod)s, %(isa95_level)s, %(location_id)s, %(package_id)s)]\nE   [parameters: {'id': 'dc1838af-16fa-4808-9a88-a6f6be97fd54', 'tag': 'EXPORT-TEST-01', 'description': 'Test Asset for Export', 'type': <AssetType.MOTOR: 'MOTOR'>, 'project_id': 'test-project-export', 'area': None, 'system': None, 'io_type': None, 'electrical': '{\"voltage\": \"480V\", \"powerKW\": 55}', 'process': '{\"fluid\": \"Water\"}', 'manufacturer_part_id': None, 'data_status': 'FRESH_IMPORT', 'confidence_score': 1.0, 'data_source_id': None, 'discipline': None, 'semantic_type': None, 'lod': None, 'isa95_level': None, 'location_id': None, 'package_id': None}]\nE   (Background on this error at: https://sqlalche.me/e/20/gkpj)"}, "start": 1764121104373, "stop": 1764121104376, "uuid": "63c024d7-c9b9-4730-bb16-f0d6712ea1ab", "historyId": "880769ee59ba9d5c3c746a9f5a15a866", "testCaseId": "880769ee59ba9d5c3c746a9f5a15a866", "fullName": "tests.test_export#test_export_csv", "labels": [{"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_export"}, {"name": "host", "value": "2ebe7fd010be"}, {"name": "thread", "value": "109-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_export"}], "titlePath": ["tests", "test_export.py"]}